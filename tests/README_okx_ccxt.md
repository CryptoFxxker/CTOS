PROJECT_ROOT:  /home/zzb/Quantify/ctos CURRENT_DIR:  /home/zzb/Quantify/ctos/ctos/drivers/okx
从配置文件读取OKX账户: 0_main_zzb_and_zhizhong (ID: 0)
配置文件不存在: /home/zzb/Quantify/ctos/configs/ctos.yaml
load_yaml ctos.yaml make some errors: None, BUT, u can still run normally, don't worry about it
使用默认代理配置: {'https': 'socks5h://127.0.0.1:1080', 'http': 'socks5h://127.0.0.1:1080'}
✓ OKX Driver初始化成功 (账户ID: 0)
================================================================================
OKX CCXT Driver 接口功能测试
================================================================================
Driver: <ctos.drivers.okx.driver_ccxt.OkxDriver object at 0x7f85e53d9e40>
测试交易对: ETH-USDT-SWAP
================================================================================

[TEST 1] get_price_now
--------------------------------------------------------------------------------
✓ 成功: 2928.6

[TEST 2] get_orderbook
--------------------------------------------------------------------------------
✓ 成功: symbol=ETH-USDT-SWAP, bids数量=5, asks数量=5
  示例: bid=[2928.6, 2351.14, 0], ask=[2928.61, 2479.2, 0]

[TEST 3] get_klines
--------------------------------------------------------------------------------
✓ 成功: DataFrame, shape=(20, 7)
  前5行:
      trade_date     open     high      low    close       vol1           vol
0  1766772000000  2920.99  2927.46  2918.46  2921.89  41677.904  1.217783e+08
1  1766775600000  2921.88  2929.20  2917.00  2924.63  40353.824  1.180200e+08
2  1766779200000  2924.62  2937.98  2921.00  2930.06  47694.610  1.397481e+08
3  1766782800000  2930.06  2934.00  2923.15  2923.67  27113.698  7.927151e+07
4  1766786400000  2923.67  2930.29  2920.22  2930.10  20408.050  5.979763e+07

[TEST 4] place_order (限价买单)
--------------------------------------------------------------------------------
✓ 成功: order_id=3165577880290697216, price=2635.74

[TEST 5] amend_order
--------------------------------------------------------------------------------
⚠ 警告: new_order_id=None，保留原order_id=3165577880290697216用于后续测试, new_price=2342.89

[TEST 6] get_order_status
--------------------------------------------------------------------------------
✓ 成功: orderId=3165577880290697216, status=open, side=buy, price=2635.74, quantity=0.01

[TEST 7] get_open_orders (仅订单ID)
--------------------------------------------------------------------------------
✓ 成功: 订单数量=1, 订单ID列表=['3165577880290697216']

[TEST 8] get_open_orders (完整信息)
--------------------------------------------------------------------------------
✓ 成功: 订单数量=1
  第一个订单: orderId=3165577880290697216, status=open, side=buy

[TEST 9] revoke_order
--------------------------------------------------------------------------------
✓ 成功: True

[TEST 10] cancel_all (无symbol参数)
--------------------------------------------------------------------------------
✗ 错误: okx cancelAllOrders() is not supported yet

[TEST 11] cancel_all (带symbol参数)
--------------------------------------------------------------------------------
✗ 错误: okx cancelAllOrders() is not supported yet

[TEST 12] fetch_balance
--------------------------------------------------------------------------------
✓ 成功: USDT余额=7568.617062132939

[TEST 13] get_position (keep_origin=False)
--------------------------------------------------------------------------------
✓ 成功: 持仓数量=106
  第一个持仓: symbol=KAITO/USDT:USDT, side=long, quantity=145.0

[TEST 14] get_position (keep_origin=True)
--------------------------------------------------------------------------------
✓ 成功: 返回原始数据
  数据条数: 1

[TEST 15] symbols
--------------------------------------------------------------------------------
✓ 成功: 交易对数量=22
  前10个交易对: ['BTC/USD:BTC-260102', 'BTC/USD:BTC-260109', 'BTC/USD:BTC-260130', 'BTC/USD:BTC-260227', 'BTC/USD:BTC-260327', 'BTC/USD:BTC-260626', 'ETH/USD:ETH-260102', 'ETH/USD:ETH-260109', 'ETH/USD:ETH-260130', 'ETH/USD:ETH-260227']

[TEST 16] exchange_limits
--------------------------------------------------------------------------------
✓ 成功: 交易对数量=22
  第一个交易对: symbol=BTC/USD:BTC-260102, price_precision=0.1, size_precision=1.0

[TEST 17] exchange_limits (指定symbol)
--------------------------------------------------------------------------------
✓ 成功: symbol=ETH-USDT-SWAP, price_precision=0.01, size_precision=0.01, min_order_size=0.01

[TEST 18] fees
--------------------------------------------------------------------------------
✓ 成功: symbol=ETH-USDT-SWAP, fundingRate_hourly=7.7807995531125e-06, fundingRate_period=6.22463964249e-05, period_hours=8.0

[TEST 19] fees (keep_origin=True)
--------------------------------------------------------------------------------
✓ 成功: 返回原始数据
  数据类型: dict, keys=['info', 'symbol', 'markPrice', 'indexPrice', 'interestRate']

================================================================================
测试完成
================================================================================
